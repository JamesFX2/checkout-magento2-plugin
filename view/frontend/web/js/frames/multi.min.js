/**
 * Checkout.com
 * Authorized and regulated as an electronic money institution
 * by the UK Financial Conduct Authority (FCA) under number 900816.
 *
 * PHP version 7
 *
 * @category  Magento2
 * @package   Checkout.com
 * @author    Platforms Development Team <platforms@checkout.com>
 * @copyright 2010-present Checkout.com
 * @license   https://opensource.org/licenses/mit-license.html MIT License
 * @link      https://docs.checkout.com/
 */

define(["jquery","mage/translate"],function(e,t){"use strict";return{load:function(e,t){return this.F=e,this.formId=t,this.F.addEventHandler(this.F.Events.FRAME_VALIDATION_CHANGED,this.onValidationChanged.bind(this)),this.F.addEventHandler(this.F.Events.PAYMENT_METHOD_CHANGED,this.paymentMethodChanged.bind(this)),this.F},getLogos:function(){var e={};return e["card-number"]={src:"card",alt:t("Card number logo")},e["expiry-date"]={src:"exp-date",alt:t("Expiry date logo")},e.cvv={src:"cvv",alt:t("CVV logo")},e},getErrors:function(){return{"card-number":t("Please enter a valid card number"),"expiry-date":t("Please enter a valid expiry date"),cvv:t("Please enter a valid CVV code")}},onValidationChanged:function(e){var t=e.element,r=e.paymentMethod,o="#"+this.formId+" .icon-container.payment-method";let n=document.querySelector(o);e.isValid||e.isEmpty?("card-number"!=t||e.isEmpty||this.showPaymentMethodIcon(n,r),this.setDefaultIcon(t),this.clearErrorIcon(t),this.clearErrorMessage(t)):("card-number"==t&&this.clearPaymentMethodIcon(),this.setDefaultErrorIcon(t),this.setErrorIcon(t),this.setErrorMessage(t))},clearErrorMessage:function(e){var t="#"+this.formId+" .error-message__"+e;document.querySelector(t).textContent=""},clearErrorIcon:function(e){document.getElementById("icon-"+e+"-error").style.removeProperty("display")},showPaymentMethodIcon:function(e,r){e&&e.classList.add("show");var o=document.getElementById("logo-payment-method");if(r){var n=r.toLowerCase();o.setAttribute("src",this.getImagesPath()+n+".svg"),o.setAttribute("alt",r||t("Payment method"))}o.style.removeProperty("display")},getImagesPath:function(){return window.checkoutConfig.payment.checkoutcom_magento2.checkoutcom_data.images_path+"/frames/multi/"},clearPaymentMethodIcon:function(e){e&&e.classList.remove("show"),document.getElementById("logo-payment-method").style.setProperty("display","none")},setErrorMessage:function(e){var t="#"+this.formId+" .error-message__"+e;document.querySelector(t).textContent=this.getErrors()[e]},setDefaultIcon:function(e){var t="icon-"+e,r=this.getLogos(),o=document.getElementById(t);o.setAttribute("src",this.getImagesPath()+r[e].src+".svg"),o.setAttribute("alt",r[e].alt)},setDefaultErrorIcon:function(e){var t="icon-"+e,r=this.getLogos(),o=document.getElementById(t);o.setAttribute("src",this.getImagesPath()+r[e].src+"-error.svg"),o.setAttribute("alt",r[e].alt)},setErrorIcon:function(e){document.getElementById("icon-"+e+"-error").style.setProperty("display","block")},paymentMethodChanged:function(e){var t=e.paymentMethod,r="#"+this.formId+" .icon-container.payment-method";let o=document.querySelector(r);t?(this.clearErrorIcon("card-number"),this.showPaymentMethodIcon(o,t)):this.clearPaymentMethodIcon(o)}}});
